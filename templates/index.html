<!DOCTYPE html>
<html>
<body>

<style>
body {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
  font-family: Arial, sans-serif;
  background-color: #2f2f2f;
  color: white;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.center {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;  /* Space between elements */
}

.input-field, .button, .select {
  padding: 10px;
  font-size: 16px;
  border: none;
  border-radius: 5px;
  width: 100%;
  max-width: 300px;  /* Max width to keep elements from becoming too wide */
  background-color: #404040;
  color: white;
  border: 1px solid #ff9933;
}

.button {
  cursor: pointer;
  background-color: #ff9933;
  color: #2f2f2f;
}

.button:hover {
  background-color: #b36b00;
}

.button.copy {
  display: none;
  font-size: 12px;  /* Smaller font size */
  padding: 5px;  /* Less padding to make the button smaller */
}

.thanks-message {
  font-size: 16px;
  text-align: center;
}

.thanks-message a {
  color: white;
  text-decoration: none;
}

.thanks-message a:hover {
  color: #ff9933;
}
</style>

<div class="center">
  <h2>modsiw's Unix Time Converter</h2>
  <select id="timezone" class="select">
    <option value="US/Pacific">US/Pacific</option>
    <option value="US/Eastern">US/Eastern</option>
    <option value="Europe/Zurich">Europe/Zurich</option>
    <option value="Asia/Kolkata">Asia/Kolkata</option>
    <option value="Australia/Sydney">Australia/Sydney</option>
  </select>
  <input type="datetime-local" id="datetime" class="input-field">
  <select id="format" class="select" style="display: none;">
    <option value="" selected>Default (18 December 2021 04:58)</option>
    <option value="f">Full (Saturday, 18 December 2021 04:58)</option>
    <option value="d">Short Date (18/12/2021)</option>
    <option value="D">Long Date (18 December 2021)</option>
    <option value="t">Short Time (04:58)</option>
    <option value="T">Long Time (04:58:30)</option>
    <option value="R">Relative Time (2 hours ago)</option>
  </select>
  <button class="button" onclick="convertToUnix()">Convert</button>
  <p id="result"></p>
  <button class="button copy" onclick="copyToClipboard()">Copy to Clipboard</button>
  <p class="thanks-message">
    Optimized for <t:unixtimecode> for Discord<br> Thanks for using converter! Follow me on Twitter <a href="https://twitter.com/itsmodsiw" target="_blank">@itsmodsiw</a>.
  </p>
</div>

<script>
document.getElementById('datetime').onchange = function() {
    document.getElementById('format').style.display = 'block';
};

function convertToUnix() {
    var datetime = document.getElementById('datetime').value;
    var timezone = document.getElementById('timezone').value;

    fetch('/convert', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ datetime: datetime, timezone: timezone })
    })
    .then(response => response.json())
    .then(data => {
        var format = document.getElementById('format').value;
        var formattedTimestamp = 'Unix Timestamp: <t:' + data.timestamp + (format ? ':' + format : '') + '>';
        document.getElementById('result').innerText = formattedTimestamp;
        document.querySelector('.copy').style.display = 'inline-block';
    });
}

function copyToClipboard() {
    var formattedTimestamp = document.getElementById('result').innerText.split(': ')[1];

    var textarea = document.createElement('textarea');
    textarea.value = formattedTimestamp;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand('copy');
    document.body.removeChild(textarea);
}
</script>

</body>
</html>
